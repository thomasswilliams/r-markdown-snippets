---
title: "qr-code.Rmd"
subtitle: "Two methods to display a QR code in an R Markdown web page, without saving an image to file, see blog post at https://thomasswilliams.github.io/development/r/2022/11/10/qr-code-r-markdown.html"
author: "Thomas Williams <https://github.com/thomasswilliams>"
output: html_document
runtime: shiny
---

Scan either of the QR codes below to open the URL `www.google.com`.

The QR code on the left is generated in javascript, while the one on the right is generated by Google Charts.

(The QR codes may not look the same due to different rendering between the two methods.)

<!-- basic two-column layout, start outer div and define multiple columns, adapted from
     https://bookdown.org/yihui/rmarkdown-cookbook/multi-column.html -->
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px; margin-top: 1em;">
<!-- start first column -->
<div>
  <strong>QR code generated in javascript</strong>, see <https://davidshimjs.github.io/qrcodejs/>:
  <!-- QR code div element
       note R Markdown looks to rename to "section-(original id)" -->
  <div id="qrcode-js"></div>

  ```
  <script>
  // load 3rd-party script for javascript QR codes, then create a QR code in div "qrcode-js"
  // dynamic load technique adapted from https://stackoverflow.com/a/59041377
  // this is necessary as sometimes the script was not loaded before trying to generate a QR code
  // this way we control loading the script *then* generating QR code

  // create a script HTML element
  const script = document.createElement("script");
  // script source is javascript QR code file, hosted on GitHub
  script.src = "https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js";
  // add the script to the HTML document
  document.body.appendChild(script);

  // listen for the script to be loaded, then create QR code in div "qrcode-js"
  script.addEventListener("load", function() {
    new QRCode(document.getElementById("section-qrcode-js"), "http://www.google.com");
  });
  </script>
  ```
<!-- end first column -->
</div>
<!-- start second column -->
<div>
  <strong>Google Charts QR code</strong>, see <https://developers.google.com/chart/infographics/docs/qr_codes>:
  <!-- need to URL encode the colon in the URL i.e. replace with "%3A" -->
  <img src="https://chart.googleapis.com/chart?chs=160x160&cht=qr&chl=http%3A//www.google.com&choe=UTF-8&chld=L|0" title="http://www.google.com"/>

  ```
  <img src="https://chart.googleapis.com/chart?chs=160x160&cht=qr&chl=http%3A//www.google.com&choe=UTF-8&chld=L|0" title="http://www.google.com"/>
  ```
<!-- end second column -->
</div>
<!-- end outer div -->
</div>

<style>
/* set size of javascript-generated QR code (cosmetic only, not really needed) */
#section-qrcode-js {
  width: 160px;
  height: 160px;
  margin-top: 5px;
  margin-bottom: 15px;
}
</style>

<script>
// load 3rd-party script for javascript QR codes, then create a QR code in div "qrcode-js"
// dynamic load technique adapted from https://stackoverflow.com/a/59041377
// this is necessary as sometimes the script was not loaded before trying to generate a QR code
// this way we control loading the script *then* generating QR code

// create a script HTML element
const script = document.createElement("script");
// script source is javascript QR code file, hosted on GitHub
script.src = "https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js";
// add the script to the HTML document
document.body.appendChild(script);

// listen for the script to be loaded, then create QR code in div "qrcode-js"
script.addEventListener("load", function() {
  new QRCode(document.getElementById("section-qrcode-js"), "http://www.google.com");
});
</script>